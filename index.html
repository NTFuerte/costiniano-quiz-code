<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Video Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background: #fafafa;
      margin: 0;
      padding: 0;
    }
    header {
      background: #ff5a5f;
      color: white;
      padding: 20px;
      text-align: center;
    }
    .quiz-container {
      max-width: 700px;
      margin: 40px auto;
      padding: 30px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    h1 { margin-top: 0; font-weight: 700; }
    #progress {
      text-align: center;
      font-weight: 600;
      margin-bottom: 15px;
    }
    iframe {
      width: 100%;
      aspect-ratio: 16 / 9;
      height: auto;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .choices.age-section {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
    }
    .choice-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 15px;
    }
    .choices button {
      padding: 15px;
      font-size: 18px;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s ease, background 0.3s ease;
      width: 120px;
    }
    .choices button:hover { transform: scale(1.05); }

    .age { background: #9C27B0; color: white; }
    .video1 { background: #4CAF50; color: white; }
    .video2 { background: #2196F3; color: white; }

    .gen-label {
      margin-top: 8px;
      font-size: 14px;
      color: #555;
    }
    .result {
      margin-top: 20px;
      font-weight: 600;
      text-align: center;
    }
    .choices.video-section {
      display: flex;
      justify-content: center;
      gap: 60px;
      margin-top: 20px;
    }

    @media (max-width: 600px) {
      header { padding: 15px; }
      h1 { font-size: 22px; }
      h2 { font-size: 18px; }
      .quiz-container {
        margin: 15px;
        padding: 20px;
      }
      .choices.age-section,
      .choices.video-section {
        flex-direction: column;
        gap: 15px;
      }
      .choices button {
        width: 100%;
        font-size: 16px;
        padding: 14px;
      }
      .gen-label { font-size: 13px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>AI Video Quiz</h1>
  </header>
  <div class="quiz-container">
    <div id="progress"></div>

    <div id="question-area">
      <h2>Please select your age range:</h2>
      <div class="choices age-section">
        <div class="choice-block">
          <button class="age" onclick="setAge('13-28','Gen Z')">13–28</button>
          <div class="gen-label">Gen Z</div>
        </div>
        <div class="choice-block">
          <button class="age" onclick="setAge('29-44','Gen Y (Millennials)')">29–44</button>
          <div class="gen-label">Gen Y (Millennials)</div>
        </div>
        <div class="choice-block">
          <button class="age" onclick="setAge('45-60','Gen X')">45–60</button>
          <div class="gen-label">Gen X</div>
        </div>
        <div class="choice-block">
          <button class="age" onclick="setAge('61-79','Baby Boomers')">61–79</button>
          <div class="gen-label">Baby Boomers</div>
        </div>
      </div>
    </div>
<div id="age-result" class="result"></div>
<div id="answer-result" class="result"></div>
  </div>

<script>
const questions = [
  { video: "https://www.youtube.com/embed/PHqbESeLHIs", text: "Which one is AI?", correct: "Video 2" },
  { video: "https://www.youtube.com/embed/H43HlJJ9Gbs", text: "Which one is AI?", correct: "Video 2" },
  { video: "https://www.youtube.com/embed/xGkNU3uwfq0", text: "Which one is AI?", correct: "Video 1" },
  { video: "https://www.youtube.com/embed/fpcwKJgKG54", text: "Which one is AI?", correct: "Video 2" },
  { video: "https://www.youtube.com/embed/8mM_BbYcGNc", text: "Which one is AI?", correct: "Video 2" },
  { video: "https://www.youtube.com/embed/vXTIT_VA1q0", text: "Which one is AI?", correct: "Video 1" },
  { video: "https://www.youtube.com/embed/Aj21mrNOeEk", text: "Which one is AI?", correct: "Video 2" },
  { video: "https://www.youtube.com/embed/lXLbWjUV8sE", text: "Which one is AI?", correct: "Video 1" },
  { video: "https://www.youtube.com/embed/fSI6BG3oY6c", text: "Which one is AI?", correct: "Video 2" },
  { video: "https://www.youtube.com/embed/yffYnQe_JE4", text: "Which one is AI?", correct: "Video 2" },
  { video: "https://www.youtube.com/embed/DbhkcwJCBDs", text: "Which one is AI?", correct: "Video 1" },
  { video: "https://www.youtube.com/embed/tXiM7N0yVNA", text: "Which one is AI?", correct: "Video 2" },
  { video: "https://www.youtube.com/embed/3lOa_x_WDQw", text: "Which one is AI?", correct: "Video 1" },
  { video: "https://www.youtube.com/embed/Y4pd98sA3RI", text: "Which one is AI?", correct: "Video 1" },
  { video: "https://www.youtube.com/embed/Vi87Q3SYjtw", text: "Which one is AI?", correct: "Video 2" }
];

let currentQuestion = 0;
let respondentAge = "";
let respondentGeneration = "";
let score = 0;

function updateProgress() {
  document.getElementById("progress").innerText =
    `Question ${currentQuestion + 1} of ${questions.length}`;
}

function setAge(ageRange, generation) {
  respondentAge = ageRange;
  respondentGeneration = generation;
  setTimeout(loadQuestion, 800);
}

function answer(choice) {
  document.querySelectorAll(".choices button").forEach(btn => btn.disabled = true);

  let correctAnswer = questions[currentQuestion].correct;
  let isCorrect = (choice === correctAnswer);

  if (isCorrect) {
    score++;
  }

  
// When quiz completes, send one final row to Google Sheet
fetch("https://script.google.com/macros/s/AKfycbxBvUOp-NCSVwrrARIAWEgNqATB0_MD6zWqACERo9PowrVmb3x8TiOVW-FS807-wbAwzg/exec", {
  method: "POST",
  body: JSON.stringify({
    generation: respondentGeneration,          // Age-based generation
    summary: `${score}/${questions.length}`    // Final score summary like 8/15
  })
})
.then(res => res.text())
.then(text => {
  console.log("Submitted to Google Sheet:", text);
})
.catch(err => {
  console.error("Error submitting:", err);
});
  setTimeout(() => {
    currentQuestion++;
    if (currentQuestion < questions.length) {
      loadQuestion();
    } else {
      document.getElementById("question-area").innerHTML = `
        <h2>Quiz Complete!</h2>
        <p>Your age range: ${respondentAge} (${respondentGeneration})</p>
        <p>You got ${score} out of ${questions.length} correct.</p>
      `;
      document.getElementById("progress").innerText = "";

      // Clear the answer feedback so it doesn’t show after quiz completion
      document.getElementById("answer-result").innerText = "";
    }
  }, 800);
}

function loadQuestion() {
  updateProgress();

  document.getElementById("question-area").innerHTML = `
    <h2>${questions[currentQuestion].text}</h2>
    <iframe src="${questions[currentQuestion].video}" frameborder="0" allowfullscreen></iframe>
    <div class="choices video-section">
      <button class="video1" onclick="answer('Video 1')">Video 1</button>
      <button class="video2" onclick="answer('Video 2')">Video 2</button>
    </div>
  `;

  // Re-enable buttons
  document.querySelectorAll(".choices button").forEach(btn => btn.disabled = false);

  // Clear previous answer feedback
  document.getElementById("answer-result").innerText = "";
}
</script>
</body>
</html>
